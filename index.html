<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>My Commitment</title>
        <meta name="description" content="Simple Twibbon using tailwind" />
        <meta name="author" content="Kiigeeks" />
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
        <link href="./dist/output.css" rel="stylesheet">

        <script src="https://html2canvas.hertzen.com/dist/html2canvas.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    </head>
    <body>
        <section id="sectionForm" class="w-screen min-h-screen flex justify-center items-center py-10 font-poppins">
            <div class="w-11/12 md:w-[40%] lg:w-[30%] min-h-[50vh] h-auto bg-gray-100 rounded-2xl flex flex-col gap-5 px-5 py-3">
                <div class="font-extrabold text-xl md:text-3xl text-center flex flex-row justify-center items-center gap-1.5 py-5">
                    <span class="font-bold text-bluePrimary text-xl md:text-3xl">Guardian of</span>
                    <span class="font-extrabold text-2xl md:text-4xl italic text-redPrimary">HEART</span>
                </div>
                <form class="flex flex-col justify-between" id="form">
                    <div class="mt-3 mb-6 w-full relative z-0 group">
                        <input 
                            type="text" 
                            name="fullname" 
                            id="fullname" 
                            min="3"
                            class="block py-2.5 px-2 w-full text-sm text-gray-900 bg-transparent 
                                        border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 
                                        focus:border-blue-600 peer" 
                            placeholder=" " 
                            required 
                        />
                        <label 
                            class="absolute top-3 -z-10 text-sm text-gray-500 
                                        duration-300 transform -translate-y-6 scale-75 origin-[0] peer-focus:left-0 peer-focus:font-medium 
                                        peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 
                                        peer-focus:scale-75 peer-focus:-translate-y-6"
                        >Fullname</label>
                    </div>
                    <div class="mt-3 mb-6 w-full relative z-0 group">
                        <input 
                            type="text" 
                            name="message1" 
                            id="message1" 
                            max="30"
                            class="block py-2.5 px-2 w-full text-sm text-gray-900 bg-transparent 
                                        border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 
                                        focus:border-blue-600 peer" 
                            placeholder=" " 
                            required 
                        />
                        <label 
                            class="absolute top-3 -z-10 text-sm text-gray-500 
                                        duration-300 transform -translate-y-6 scale-75 origin-[0] peer-focus:left-0 peer-focus:font-medium 
                                        peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 
                                        peer-focus:scale-75 peer-focus:-translate-y-6"
                        >Message 1</label>
                    </div>
                    <div class="mt-3 mb-6 w-full relative z-0 group">
                        <input 
                            type="text" 
                            name="message2" 
                            id="message2" 
                            max="30"
                            class="block py-2.5 px-2 w-full text-sm text-gray-900 bg-transparent 
                                        border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 
                                        focus:border-blue-600 peer" 
                            placeholder=" " 
                        />
                        <label 
                            class="absolute top-3 -z-10 text-sm text-gray-500 
                                        duration-300 transform -translate-y-6 scale-75 origin-[0] peer-focus:left-0 peer-focus:font-medium 
                                        peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 
                                        peer-focus:scale-75 peer-focus:-translate-y-6"
                        >Message 2</label>
                    </div>
                    <div class="mt-3 mb-6 w-full relative z-0 group">
                        <input 
                            type="text" 
                            name="message3" 
                            id="message3" 
                            max="30"
                            class="block py-2.5 px-2 w-full text-sm text-gray-900 bg-transparent 
                                        border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 
                                        focus:border-blue-600 peer" 
                            placeholder=" " 
                        />
                        <label 
                            class="absolute top-3 -z-10 text-sm text-gray-500 
                                        duration-300 transform -translate-y-6 scale-75 origin-[0] peer-focus:left-0 peer-focus:font-medium 
                                        peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 
                                        peer-focus:scale-75 peer-focus:-translate-y-6"
                        >Message 3</label>
                    </div>
                    <div class="mt-3 mb-6 w-full relative z-0 group">
                        <input 
                            type="text" 
                            name="message4" 
                            id="message4" 
                            max="30"
                            class="block py-2.5 px-2 w-full text-sm text-gray-900 bg-transparent 
                                        border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 
                                        focus:border-blue-600 peer" 
                            placeholder=" " 
                        />
                        <label 
                            class="absolute top-3 -z-10 text-sm text-gray-500 
                                        duration-300 transform -translate-y-6 scale-75 origin-[0] peer-focus:left-0 peer-focus:font-medium 
                                        peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 
                                        peer-focus:scale-75 peer-focus:-translate-y-6"
                        >Message 4</label>
                    </div>
                    <div class="mt-3 mb-6 w-full relative z-0 group">
                        <input 
                            type="text" 
                            name="message5" 
                            id="message5" 
                            max="30"
                            class="block py-2.5 px-2 w-full text-sm text-gray-900 bg-transparent 
                                        border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 
                                        focus:border-blue-600 peer" 
                            placeholder=" " 
                        />
                        <label 
                            class="absolute top-3 -z-10 text-sm text-gray-500 
                                        duration-300 transform -translate-y-6 scale-75 origin-[0] peer-focus:left-0 peer-focus:font-medium 
                                        peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 
                                        peer-focus:scale-75 peer-focus:-translate-y-6"
                        >Message 5</label>
                    </div>
                    <div class="mb-6 mt-3 w-full relative z-0 group">
                        <label 
                            class="block mb-2 font-ssp text-sm font-medium text-gray-500" 
                        >Upload Photo</label>
                        <input 
                            type="file" 
                            name="photo"
                            id="photo"
                            accept='.png,.jpg,.jpeg'
                            class="block w-full text-sm text-slate-500
                                        file:mr-4 file:py-2 file:px-4
                                        file:rounded-full file:border-0
                                        file:text-sm file:font-semibold
                                        file:bg-gray-50 file:text-gray-500
                                        hover:file:bg-gray-100"
                        />
                        <p class="mt-1 font-ssp text-xs text-gray-500 dark:text-gray-300" id="file_photo_help">PNG, JPG, JPEG.</p>
                    
                    </div>
                    <div class="mb-6 w-full relative z-0 flex justify-center gap-5">
                        <button 
                            type="submit" 
                            class="mt-5 px-5 py-2.5 w-11/12 rounded-lg sm:w-autorounded-lg font-medium text-sm text-center text-white bg-green-400 hover:bg-green-500 cursor-pointer"
                        >Submit</button>
                    </div>
                </form>
            </div>
        </section>

        <section id="sectionPreview" class="hidden w-full h-full flex flex-col items-center justify-center gap-10">
            <div
                class="w-screen lg:w-[640px] px-3 bg-white h-full min-h-screen flex flex-col relative" 
                style="background-image: url('/dist/images/background.jpg'); background-size: cover; background-position: center; background-repeat: no-repeat;"
                id="html-content-holder"
            >
                <div class="w-full h-auto absolute top-2 left-0 z-10">
                    <img src="./dist/images/head.png" alt="header" class="w-full h-full object-contain">
                </div>
                <div class="mt-20 flex flex-col px-10 items-center justify-start font-poppins tracking-wider gap-4">
                    <div class="rounded-xl w-3/4 md:w-1/2">
                        <img alt="photo" class="rounded-xl w-full h-full object-cover showPhoto">
                    </div>
                    <div class="w-full md:w-[80%] flex flex-col">
                        <h3 class="font-semibold text-xl md:text-2xl text-center" id="showName"></h3>
                        <p class="text-center flex flex-row justify-center items-center gap-2">
                            <span class="font-bold text-bluePrimary text-xl md:text-3xl">Guardian of</span>
                            <span class="font-extrabold text-2xl md:text-4xl italic text-redPrimary">HEART</span>
                        </p>
                        <h5 class="font-semibold text-base md:text-lg mt-2">My Commitment :</h5>
                        <ol class="list-decimal ml-6 space-y-2 text-gray-700 text-sm">
                            <li id="showMessage1"></li>
                            <li id="showMessage2"></li>
                            <li id="showMessage3"></li>
                            <li id="showMessage4"></li>
                            <li id="showMessage5"></li>
                        </ol>
                    </div>
                </div>
                <div class="w-full h-auto mt-5 absolute bottom-2 left-0 z-10">
                    <img src="./dist/images/foot.png" alt="footer" class="w-full h-full object-contain">
                </div>
            </div>
            
            <button class="font-poppins px-5 py-2 bg-bluePrimary text-white mb-10" id="btn_convert">
                Download
            </button>

            <div class="hidden flex flex-col gap-5">
                <h3 class="">Download</h3>
                <div id="previewImg" class="w-full h-full"></div>
            </div>
        </section>

        <h3 class="hidden">Download :</h3>
        <div id="previewImg" class="hidden"></div>

        <script>
            document.getElementById("btn_convert").addEventListener("click", function () {
                html2canvas(document.getElementById("html-content-holder"), {
                    allowTaint: true,
                    useCORS: true,
                }).then(function (canvas) {
                    var link = document.createElement("a");
                    document.body.appendChild(link);
                    document.getElementById("previewImg").appendChild(canvas);
                    const today = new Date();

                    const month = today.toLocaleString('default', { month: 'long' }); // Mendapatkan nama bulan
                    const year = today.getFullYear(); // Mendapatkan tahun

                    link.download = `My-Commitment-${month}${year}.png`;
                    link.href = canvas.toDataURL();
                    link.target = "_blank";
                    link.click();
                });
            });
            
            function handleSubmit(event) {
                event.preventDefault();
                const valName = document.querySelector('#fullname').value;
                const valMessage1 = document.querySelector('#message1').value;
                const valMessage2 = document.querySelector('#message2').value;
                const valMessage3 = document.querySelector('#message3').value;
                const valMessage4 = document.querySelector('#message4').value;
                const valMessage5 = document.querySelector('#message5').value;

                const showName = document.getElementById('showName');
                const showMessage1 = document.getElementById('showMessage1');
                const showMessage2 = document.getElementById('showMessage2');
                const showMessage3 = document.getElementById('showMessage3');
                const showMessage4 = document.getElementById('showMessage4');
                const showMessage5 = document.getElementById('showMessage5');

                showName.innerHTML = valName;
                showMessage1.innerHTML = valMessage1;
                showMessage2.innerHTML = valMessage2;
                showMessage3.innerHTML = valMessage3;
                showMessage4.innerHTML = valMessage4;
                showMessage5.innerHTML = valMessage5;
                
                const image = document.querySelector('#photo');
                const imgPreview = document.querySelector('.showPhoto')

                const blob = URL.createObjectURL(image.files[0]);
                imgPreview.src = blob;

                const sectionForm = document.getElementById("sectionForm");
                const sectionPreview = document.getElementById("sectionPreview");
                sectionPreview.classList.remove("hidden");
                sectionForm.classList.add("hidden");
            }

            const form = document.getElementById("form");
            form.addEventListener("submit", handleSubmit);
        </script>
    </body>
</html>